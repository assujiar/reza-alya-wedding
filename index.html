<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0b0d12" />
  <title>Undangan Pernikahan Reza & Alya</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-0:#07080b;
      --bg-1:#0b0d12;
      --bg-2:#111522;
      --ink:#f3f0ea;
      --muted:rgba(243,240,234,.78);
      --muted2:rgba(243,240,234,.62);
      --line:rgba(243,240,234,.10);
      --glass:rgba(255,255,255,.06);
      --glass2:rgba(255,255,255,.09);
      --gold:#d9bb7a;
      --gold2:rgba(217,187,122,.58);
      --rose:rgba(214,140,157,.22);
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --shadow2: 0 10px 32px rgba(0,0,0,.45);
      --r: 22px;
      --r2: 28px;
      --max: 820px;
      --pad: 22px;
      --pad2: 28px;
      --serif: "Cormorant Garamond", ui-serif, Georgia, "Times New Roman", serif;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      color:var(--ink);
      background:
        radial-gradient(1200px 900px at 20% -10%, rgba(217,187,122,.10), transparent 60%),
        radial-gradient(900px 800px at 90% 10%, rgba(214,140,157,.10), transparent 55%),
        radial-gradient(1200px 900px at 50% 120%, rgba(255,255,255,.05), transparent 55%),
        linear-gradient(180deg, var(--bg-0), var(--bg-1) 45%, var(--bg-0));
      font-family:var(--sans);
      letter-spacing:.2px;
      overflow-x:hidden;
    }

    /* subtle noise */
    body::before{
      content:"";
      position:fixed;
      inset:-40px;
      pointer-events:none;
      opacity:.07;
      background-image:
        repeating-radial-gradient(circle at 10% 20%, rgba(255,255,255,.08) 0 1px, transparent 1px 7px),
        repeating-radial-gradient(circle at 80% 30%, rgba(255,255,255,.06) 0 1px, transparent 1px 9px);
      mix-blend-mode:overlay;
      filter: blur(.2px);
      z-index:0;
    }

    a{ color:inherit; text-decoration:none; }
    button,input,select,textarea{ font:inherit; color:inherit; }
    ::selection{ background:rgba(217,187,122,.22); }

    .app{
      position:relative;
      z-index:1;
      min-height:100%;
    }

    .wrap{
      width: min(var(--max), 100%);
      margin: 0 auto;
      padding: 0 var(--pad);
    }

    .top-space{ height: 12px; }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border: 1px solid rgba(255,255,255,.10);
      border-radius: var(--r2);
      box-shadow: var(--shadow2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .soft{
      color:var(--muted);
      line-height:1.9;
      letter-spacing:.25px;
    }

    .tiny{
      color:var(--muted2);
      font-size: 13px;
      letter-spacing:.35px;
    }

    .title{
      font-family:var(--serif);
      letter-spacing:.8px;
      line-height:1.12;
      text-wrap:balance;
    }

    .h1{
      font-size: clamp(38px, 6.5vw, 58px);
      font-weight: 600;
      margin: 0;
    }

    .h2{
      font-size: clamp(26px, 4.6vw, 38px);
      font-weight: 600;
      margin: 0;
    }

    .h3{
      font-size: 20px;
      font-weight: 600;
      margin: 0;
      letter-spacing:.5px;
      font-family:var(--serif);
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 10px 30px rgba(0,0,0,.28);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }

    .dot{
      width:6px;height:6px;border-radius:999px;
      background: var(--gold);
      box-shadow: 0 0 0 5px rgba(217,187,122,.12);
    }

    /* gate */
    .gate{
      position:fixed;
      inset:0;
      z-index:50;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 22px;
      background:
        radial-gradient(900px 700px at 50% 20%, rgba(217,187,122,.10), transparent 60%),
        radial-gradient(900px 700px at 80% 85%, rgba(214,140,157,.10), transparent 60%),
        linear-gradient(180deg, rgba(7,8,11,.92), rgba(7,8,11,.95));
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      transition: opacity .7s ease, transform .7s ease;
    }
    .gate.is-hidden{ opacity:0; transform: translateY(8px); pointer-events:none; }

    .gate-card{
      width: min(560px, 100%);
      padding: 22px 18px 18px;
      border-radius: 28px;
      border: 1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .gate-card::before{
      content:"";
      position:absolute;
      inset:-1px;
      background:
        radial-gradient(600px 260px at 50% 0%, rgba(217,187,122,.18), transparent 60%),
        radial-gradient(600px 260px at 50% 120%, rgba(214,140,157,.10), transparent 60%);
      opacity:.65;
      pointer-events:none;
    }
    .gate-inner{ position:relative; z-index:1; text-align:center; }
    .gate-to{
      font-family:var(--serif);
      letter-spacing:1px;
      font-weight: 500;
      margin: 10px 0 0;
      font-size: 18px;
      color: rgba(243,240,234,.92);
    }
    .gate-name{
      margin: 6px 0 0;
      font-size: 22px;
      font-weight: 600;
      font-family:var(--serif);
      letter-spacing:.9px;
    }
    .gate-sub{
      margin: 12px 0 0;
      color: var(--muted);
      line-height: 1.8;
      letter-spacing:.25px;
      font-size: 14px;
    }
    .gate-actions{
      margin-top: 16px;
      display:flex;
      justify-content:center;
      gap: 10px;
      flex-wrap:wrap;
    }
    .btn{
      cursor:pointer;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      padding: 12px 16px;
      border-radius: 999px;
      transition: transform .2s ease, background .2s ease, border-color .2s ease;
      letter-spacing:.35px;
      display:inline-flex;
      align-items:center;
      gap:10px;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.18); }
    .btn:active{ transform: translateY(0px); }
    .btn.primary{
      background: linear-gradient(180deg, rgba(217,187,122,.26), rgba(217,187,122,.10));
      border-color: rgba(217,187,122,.38);
    }
    .btn .ico{ width:18px; height:18px; display:inline-block; }
    .btn .ico svg{ width:18px; height:18px; display:block; }

    .gate-fil{
      margin: 14px auto 0;
      width: 190px;
      opacity:.9;
      filter: drop-shadow(0 10px 24px rgba(0,0,0,.38));
    }

    /* layout */
    .hero{
      padding: 24px 0 6px;
    }

    .hero-photo{
      margin-top: 16px;
      border-radius: 30px;
      border:1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }

    .frame{
      position:relative;
      border-radius: 30px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(700px 220px at 50% 10%, rgba(217,187,122,.12), transparent 60%),
        radial-gradient(700px 260px at 50% 120%, rgba(214,140,157,.08), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
    }

    .photo{
      width:100%;
      display:block;
      position:relative;
      box-shadow: var(--shadow2);
    }
    .photo img{
      width:100%;
      height:100%;
      display:block;
      object-fit: contain; /* no cropping */
      object-position:center;
      filter: contrast(1.02) saturate(1.02);
      transform: translateZ(0);
    }

    /* varied ratios */
    .ratio-45{ aspect-ratio: 4 / 5; }
    .ratio-34{ aspect-ratio: 3 / 4; }
    .ratio-11{ aspect-ratio: 1 / 1; }
    .ratio-169{ aspect-ratio: 16 / 9; }
    .ratio-219{ aspect-ratio: 21 / 9; }

    .hero-photo::after{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(900px 420px at 50% 12%, rgba(0,0,0,.05), rgba(0,0,0,.52) 70%),
        linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.35));
      pointer-events:none;
    }

    .hero-text{
      padding: 18px 6px 0;
      text-align:center;
    }

    .names{
      margin-top: 8px;
    }

    .when{
      margin-top: 10px;
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
    }

    .quote{
      margin-top: 14px;
      padding: 14px 16px;
      border-radius: 20px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 12px 34px rgba(0,0,0,.32);
    }

    .arabic{
      font-family: var(--serif);
      font-size: 20px;
      letter-spacing: .9px;
      line-height: 1.7;
      opacity: .96;
    }

    .ref{
      margin-top: 10px;
      color: var(--muted2);
      font-size: 13px;
      letter-spacing: .35px;
    }

    .section{
      padding: 26px 0 8px;
    }

    .panel{
      padding: 18px;
      border-radius: var(--r2);
    }

    .panel .soft{ margin: 10px 0 0; }

    /* background section with image (no crop) */
    .bg-section{
      position:relative;
      border-radius: 30px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow2);
    }
    .bg-section::before{
      content:"";
      position:absolute;
      inset:0;
      background-image: var(--bgimg);
      background-size: contain; /* no cropping */
      background-repeat:no-repeat;
      background-position:center;
      opacity: .92;
      filter: saturate(1.02) contrast(1.02);
      transform: translateZ(0);
    }
    .bg-section::after{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(900px 420px at 50% 10%, rgba(0,0,0,.10), rgba(0,0,0,.62) 70%),
        linear-gradient(180deg, rgba(0,0,0,.12), rgba(0,0,0,.62));
      pointer-events:none;
    }
    .bg-inner{
      position:relative;
      z-index:1;
      padding: 18px;
    }

    .grid{
      display:grid;
      gap: 12px;
    }

    .block{
      padding: 16px;
      border-radius: 22px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
    }

    .block h4{
      margin:0;
      font-family: var(--serif);
      font-size: 18px;
      letter-spacing: .6px;
      font-weight: 600;
    }

    .block .meta{
      margin-top: 10px;
      color: var(--muted);
      line-height: 1.85;
      letter-spacing:.25px;
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 14px;
    }

    .count{
      margin-top: 14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .chip{
      padding: 10px 12px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: var(--muted);
      letter-spacing:.25px;
      display:inline-flex;
      align-items:center;
      gap:10px;
    }

    .timer{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .tbox{
      padding: 10px 12px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      min-width: 92px;
      text-align:center;
    }
    .tval{
      font-family: var(--serif);
      font-size: 24px;
      font-weight: 600;
      letter-spacing: .8px;
    }
    .tlabel{
      margin-top: 4px;
      font-size: 12px;
      color: var(--muted2);
      letter-spacing:.35px;
    }

    .form{
      display:grid;
      gap: 12px;
      margin-top: 12px;
    }
    .field{
      display:grid;
      gap: 7px;
    }
    .input, .select, .textarea{
      width:100%;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      padding: 12px 12px;
      outline:none;
      transition: border-color .2s ease, background .2s ease, transform .2s ease;
    }
    .textarea{ min-height: 92px; resize: vertical; }
    .input:focus, .select:focus, .textarea:focus{
      border-color: rgba(217,187,122,.38);
      background: rgba(255,255,255,.05);
    }

    .list{
      margin-top: 14px;
      display:grid;
      gap: 10px;
    }
    .item{
      padding: 14px 14px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
    }
    .item-top{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .name{
      font-family: var(--serif);
      font-weight: 600;
      letter-spacing:.6px;
      font-size: 18px;
    }
    .time{
      color: var(--muted2);
      font-size: 12px;
      letter-spacing:.35px;
      white-space:nowrap;
    }
    .msg{
      margin-top: 8px;
      color: var(--muted);
      line-height: 1.9;
      letter-spacing:.2px;
      font-size: 14px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 7px 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color: var(--muted2);
      font-size: 12px;
      letter-spacing:.35px;
      margin-top: 10px;
    }
    .bico{ width:10px; height:10px; border-radius:999px; background: rgba(217,187,122,.78); }
    .bico.off{ background: rgba(243,240,234,.25); }

    /* filigree separator */
    .sep{
      width: 100%;
      display:flex;
      justify-content:center;
      padding: 18px 0 4px;
      opacity:0;
      transform: translateY(8px);
      filter: blur(1px);
      transition: opacity .9s ease, transform .9s ease, filter .9s ease;
    }
    .sep.is-visible{
      opacity:1;
      transform: translateY(0);
      filter: blur(0);
    }
    .sep svg{
      width: min(380px, 78vw);
      height: 30px;
      opacity:.9;
      filter: drop-shadow(0 12px 24px rgba(0,0,0,.45));
    }
    .sep path{
      stroke: rgba(217,187,122,.75);
      stroke-width: 1.2;
      fill:none;
      stroke-linecap:round;
      stroke-linejoin:round;
    }

    /* reveal */
    .reveal{
      opacity:0;
      transform: translateY(10px);
      filter: blur(1px);
      transition: opacity .9s ease, transform .9s ease, filter .9s ease;
      will-change: opacity, transform, filter;
    }
    .reveal.is-visible{
      opacity:1;
      transform: translateY(0);
      filter: blur(0);
    }

    .photo.reveal img{
      opacity:0;
      transform: scale(1.01);
      filter: blur(2px);
      transition: opacity .95s ease, transform .95s ease, filter .95s ease;
    }
    .photo.reveal.is-visible img{
      opacity:1;
      transform: scale(1.00);
      filter: blur(0);
    }

    /* bottom nav */
    .dock{
      position:fixed;
      left:0; right:0;
      bottom: 14px;
      display:flex;
      justify-content:center;
      z-index:30;
      padding: 0 14px;
      pointer-events:none;
    }
    .dock-inner{
      pointer-events:auto;
      display:flex;
      gap: 8px;
      align-items:center;
      padding: 8px;
      border-radius: 999px;
      background: rgba(10,12,18,.58);
      border: 1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
    }
    .navbtn{
      cursor:pointer;
      border:1px solid transparent;
      background: transparent;
      padding: 10px 12px;
      border-radius: 999px;
      color: rgba(243,240,234,.78);
      letter-spacing:.35px;
      font-size: 13px;
      transition: background .2s ease, color .2s ease, transform .2s ease, border-color .2s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .navbtn:hover{ background: rgba(255,255,255,.06); color: rgba(243,240,234,.92); }
    .navbtn:active{ transform: translateY(1px); }
    .navbtn.active{
      background: rgba(217,187,122,.14);
      border-color: rgba(217,187,122,.26);
      color: rgba(243,240,234,.95);
    }

    /* audio */
    .audio-fab{
      position:fixed;
      top: 14px;
      right: 14px;
      z-index:35;
      display:flex;
      gap: 8px;
      pointer-events:none;
    }
    .fab{
      pointer-events:auto;
      width: 44px;
      height: 44px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(10,12,18,.50);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: 0 18px 50px rgba(0,0,0,.50);
      display:grid;
      place-items:center;
      cursor:pointer;
      transition: transform .2s ease, background .2s ease, border-color .2s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .fab:hover{ transform: translateY(-1px); background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.18); }
    .fab svg{ width: 18px; height: 18px; opacity:.92; }
    .fab.muted svg{ opacity:.70; }

    /* toast */
    .toast{
      position:fixed;
      left:0; right:0;
      bottom: 92px;
      z-index:40;
      display:flex;
      justify-content:center;
      padding: 0 14px;
      pointer-events:none;
    }
    .toast-inner{
      pointer-events:none;
      max-width: min(520px, 100%);
      padding: 12px 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(10,12,18,.62);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
      color: rgba(243,240,234,.90);
      letter-spacing:.25px;
      line-height: 1.6;
      opacity:0;
      transform: translateY(8px);
      transition: opacity .35s ease, transform .35s ease;
      text-align:center;
    }
    .toast-inner.show{
      opacity:1;
      transform: translateY(0);
    }

    /* no big titles like "Cover/Pembuka/Mempelai" etc */
    .spacious{ padding: 18px 0 10px; }

    /* reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{ scroll-behavior:auto !important; }
      .reveal, .sep, .toast-inner, .gate{ transition:none !important; transform:none !important; filter:none !important; }
      .photo.reveal img{ transition:none !important; opacity:1 !important; transform:none !important; filter:none !important; }
    }

    @media (max-width: 480px){
      .wrap{ padding: 0 16px; }
      .gate-card{ padding: 20px 16px 16px; }
      .tbox{ min-width: 78px; }
      .dock{ bottom: 12px; }
      .toast{ bottom: 88px; }
      .audio-fab{ top: 12px; right: 12px; }
    }
  </style>
</head>

<body>
  <div class="app" id="app">

    <!-- GATE -->
    <div class="gate" id="gate" role="dialog" aria-modal="true" aria-label="Undangan">
      <div class="gate-card">
        <div class="gate-inner">
          <div class="pill" aria-hidden="true">
            <span class="dot"></span>
            <span class="tiny" style="letter-spacing:.5px;">بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيم</span>
          </div>

          <p class="gate-to">Kepada Yth.</p>
          <div class="gate-name" id="guestName">Dimas Budi Ramadhan</div>

          <svg class="gate-fil" viewBox="0 0 420 64" aria-hidden="true">
            <path d="M40 32c26-18 52-18 78 0 26 18 52 18 78 0 26-18 52-18 78 0 26 18 52 18 78 0" stroke="rgba(217,187,122,.78)" stroke-width="1.4" fill="none" stroke-linecap="round"/>
            <path d="M210 18c10 8 10 20 0 28-10-8-10-20 0-28z" stroke="rgba(217,187,122,.55)" stroke-width="1.2" fill="none" stroke-linecap="round"/>
          </svg>

          <div class="gate-sub">
            Dengan memohon rahmat dan ridha Allah SWT, kami mengundang Anda untuk menjadi saksi atas sebuah janji yang disempurnakan dalam doa.
          </div>

          <div class="gate-actions">
            <button class="btn primary" id="openBtn" type="button">
              <span class="ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M8 5l10 7-10 7V5z" fill="rgba(243,240,234,.92)"/>
                </svg>
              </span>
              <span>Buka Undangan</span>
            </button>
          </div>

          <div class="tiny" style="margin-top:10px; color:rgba(243,240,234,.55); letter-spacing:.35px;">
            Musik akan diputar setelah dibuka.
          </div>
        </div>
      </div>
    </div>

    <!-- AUDIO + TOAST -->
    <div class="audio-fab" aria-hidden="false">
      <button class="fab" id="playFab" type="button" aria-label="Putar atau jeda musik" title="Putar/Jeda">
        <svg id="playIcon" viewBox="0 0 24 24" fill="none">
          <path d="M8 5l10 7-10 7V5z" fill="rgba(243,240,234,.92)"/>
        </svg>
      </button>
      <button class="fab muted" id="muteFab" type="button" aria-label="Aktifkan atau nonaktifkan suara" title="Mute">
        <svg id="muteIcon" viewBox="0 0 24 24" fill="none">
          <path d="M11 5L7 9H4v6h3l4 4V5z" fill="rgba(243,240,234,.92)"/>
          <path d="M16 9l4 6" stroke="rgba(243,240,234,.92)" stroke-width="2" stroke-linecap="round"/>
          <path d="M20 9l-4 6" stroke="rgba(243,240,234,.92)" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>

    <div class="toast" aria-live="polite" aria-atomic="true">
      <div class="toast-inner" id="toast"></div>
    </div>

    <audio id="bgm" preload="auto"></audio>

    <!-- CONTENT -->
    <div class="top-space"></div>

    <header class="hero wrap" id="top">
      <div class="hero-photo reveal">
        <div class="frame ratio-45 photo">
          <img src="assets/img/reza-alya.png" alt="Reza dan Alya" loading="eager" decoding="async">
        </div>
      </div>

      <div class="hero-text reveal">
        <div class="pill" style="margin: 0 auto;">
          <span class="dot"></span>
          <span class="tiny" id="guestLine" style="letter-spacing:.45px;">Untuk: Dimas Budi Ramadhan</span>
        </div>

        <div class="names title" style="margin-top:14px;">
          <h1 class="h1">Reza Budi Prasetyo<br><span style="color:rgba(217,187,122,.92); font-weight:500;">&amp;</span><br>Alya Putri Maharani</h1>
        </div>

        <div class="when">
          <span class="pill"><span class="tiny" style="letter-spacing:.5px;">17 Januari 2026</span></span>
          <span class="pill"><span class="tiny" style="letter-spacing:.5px;">Le Dian Hotel Serang</span></span>
        </div>

        <div class="quote reveal">
          <div class="arabic">وَمِنْ آيَاتِهِ أَنْ خَلَقَ لَكُمْ مِنْ أَنْفُسِكُمْ أَزْوَاجًا لِتَسْكُنُوا إِلَيْهَا وَجَعَلَ بَيْنَكُمْ مَوَدَّةً وَرَحْمَةً</div>
          <div class="soft" style="margin-top:10px;">
            “Di antara tanda-tanda (kebesaran)-Nya, Dia menciptakan pasangan-pasangan untukmu agar kamu merasa tenteram kepadanya,
            dan Dia menjadikan di antaramu rasa kasih dan sayang.”
          </div>
          <div class="ref">QS. Ar-Rūm (30): 21</div>
        </div>
      </div>
    </header>

    <div class="sep" aria-hidden="true">
      <svg viewBox="0 0 420 64">
        <path d="M40 32c26-18 52-18 78 0 26 18 52 18 78 0 26-18 52-18 78 0 26 18 52 18 78 0"/>
        <path d="M210 18c10 8 10 20 0 28-10-8-10-20 0-28z"/>
      </svg>
    </div>

    <section class="section wrap reveal" id="rangkaian">
      <div class="panel card">
        <h2 class="h2 title">Di bawah langit yang sama</h2>
        <p class="soft">
          Dengan penuh syukur, kami memohon doa dan restu.
          Semoga langkah ini dibingkai ketenangan, dilapangkan rezeki, diteguhkan hati,
          dan dipelihara cinta yang tumbuh, pelan namun pasti.
        </p>
      </div>
    </section>

    <div class="sep" aria-hidden="true">
      <svg viewBox="0 0 420 64">
        <path d="M40 32c26-18 52-18 78 0 26 18 52 18 78 0 26-18 52-18 78 0 26 18 52 18 78 0"/>
        <path d="M210 18c10 8 10 20 0 28-10-8-10-20 0-28z"/>
      </svg>
    </div>

    <section class="section wrap reveal" id="kisah">
      <div class="frame ratio-34 photo reveal">
        <img src="assets/img/reza-alya.2.png" alt="Momen" loading="lazy" decoding="async">
      </div>

      <div class="spacious">
        <div class="panel card">
          <h2 class="h2 title">Doa yang dipanjatkan diam-diam</h2>
          <p class="soft">
            “Ya Rabb kami, anugerahkanlah kepada kami pasangan dan keturunan sebagai penyejuk hati,
            dan jadikanlah kami pemimpin bagi orang-orang bertakwa.”
          </p>
          <div class="ref">QS. Al-Furqān (25): 74</div>
        </div>
      </div>
    </section>

    <div class="sep" aria-hidden="true">
      <svg viewBox="0 0 420 64">
        <path d="M40 32c26-18 52-18 78 0 26 18 52 18 78 0 26-18 52-18 78 0 26 18 52 18 78 0"/>
        <path d="M210 18c10 8 10 20 0 28-10-8-10-20 0-28z"/>
      </svg>
    </div>

    <section class="section wrap reveal" id="janji">
      <div class="frame ratio-169 photo reveal">
        <img src="assets/img/reza-alya.3.png" alt="Reza dan Alya" loading="lazy" decoding="async">
      </div>

      <div class="spacious">
        <div class="panel card">
          <h2 class="h2 title">Sebuah janji, disaksikan waktu</h2>
          <p class="soft">
            Bukan tentang kesempurnaan, melainkan tentang memilih untuk pulang pada yang sama,
            setiap hari. Dalam sabar yang dipeluk, dalam syukur yang dijaga.
          </p>
        </div>
      </div>
    </section>

    <div class="sep" aria-hidden="true">
      <svg viewBox="0 0 420 64">
        <path d="M40 32c26-18 52-18 78 0 26 18 52 18 78 0 26-18 52-18 78 0 26 18 52 18 78 0"/>
        <path d="M210 18c10 8 10 20 0 28-10-8-10-20 0-28z"/>
      </svg>
    </div>

    <section class="section wrap reveal" id="hari">
      <div class="bg-section reveal" style="--bgimg:url('assets/img/reza-alya.4.png');">
        <div class="bg-inner">
          <h2 class="h2 title">Hari yang dinanti</h2>

          <div class="grid" style="margin-top:14px;">
            <div class="block">
              <h4>Akad Nikah</h4>
              <div class="meta">
                17 Januari 2026<br>
                08.00–09.00 WIB
              </div>
            </div>

            <div class="block reveal" id="resepsiBlock" style="--bgimg:url('assets/img/reza-alya.5.png');">
              <h4>Resepsi</h4>
              <div class="meta">
                17 Januari 2026<br>
                10.00–15.00 WIB
              </div>
            </div>
          </div>

          <div class="count">
            <span class="chip"><span class="dot"></span><span class="tiny" style="letter-spacing:.45px;">Menuju Akad</span></span>
            <div class="timer" id="timer" aria-label="Hitung mundur">
              <div class="tbox"><div class="tval" id="d">0</div><div class="tlabel">Hari</div></div>
              <div class="tbox"><div class="tval" id="h">0</div><div class="tlabel">Jam</div></div>
              <div class="tbox"><div class="tval" id="m">0</div><div class="tlabel">Menit</div></div>
              <div class="tbox"><div class="tval" id="s">0</div><div class="tlabel">Detik</div></div>
            </div>
          </div>

          <div class="actions">
            <a class="btn primary" href="https://maps.app.goo.gl/oJVfShW7g5PJV2cS8" target="_blank" rel="noopener noreferrer" aria-label="Buka Google Maps">
              <span class="ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M12 21s7-5.2 7-12a7 7 0 10-14 0c0 6.8 7 12 7 12z" stroke="rgba(243,240,234,.92)" stroke-width="1.8"/>
                  <path d="M12 12.2a2.2 2.2 0 100-4.4 2.2 2.2 0 000 4.4z" fill="rgba(217,187,122,.85)"/>
                </svg>
              </span>
              <span>Buka Maps</span>
            </a>

            <button class="btn" id="copyAddr" type="button" aria-label="Salin alamat">
              <span class="ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M9 9h10v12H9V9z" stroke="rgba(243,240,234,.92)" stroke-width="1.8"/>
                  <path d="M5 15H4a1 1 0 01-1-1V4a1 1 0 011-1h10a1 1 0 011 1v1" stroke="rgba(243,240,234,.60)" stroke-width="1.8"/>
                </svg>
              </span>
              <span>Salin Alamat</span>
            </button>
          </div>

          <div class="actions" style="margin-top:10px;">
            <button class="btn" id="icsAkad" type="button" aria-label="Tambahkan Akad ke kalender">Tambah Akad ke Kalender</button>
            <button class="btn" id="icsResepsi" type="button" aria-label="Tambahkan Resepsi ke kalender">Tambah Resepsi ke Kalender</button>
          </div>

          <div class="tiny" style="margin-top:12px;">
            Le Dian Hotel Serang
          </div>
        </div>
      </div>
    </section>

    <div class="sep" aria-hidden="true">
      <svg viewBox="0 0 420 64">
        <path d="M40 32c26-18 52-18 78 0 26 18 52 18 78 0 26-18 52-18 78 0 26 18 52 18 78 0"/>
        <path d="M210 18c10 8 10 20 0 28-10-8-10-20 0-28z"/>
      </svg>
    </div>

    <section class="section wrap reveal" id="tempat">
      <div class="frame ratio-219 photo reveal">
        <img src="assets/img/reza-alya.6.png" alt="Lokasi" loading="lazy" decoding="async">
      </div>

      <div class="spacious">
        <div class="panel card">
          <h2 class="h2 title">Tempat kita bertemu dalam doa</h2>
          <p class="soft">
            Semoga langkah Anda dipermudah, perjalanan diberi keselamatan, dan momen ini menjadi kenangan yang lembut untuk dikenang.
          </p>
          <div class="actions" style="margin-top:12px;">
            <a class="btn primary" href="https://maps.app.goo.gl/oJVfShW7g5PJV2cS8" target="_blank" rel="noopener noreferrer">Buka Maps</a>
          </div>
        </div>
      </div>
    </section>

    <div class="sep" aria-hidden="true">
      <svg viewBox="0 0 420 64">
        <path d="M40 32c26-18 52-18 78 0 26 18 52 18 78 0 26-18 52-18 78 0 26 18 52 18 78 0"/>
        <path d="M210 18c10 8 10 20 0 28-10-8-10-20 0-28z"/>
      </svg>
    </div>

    <section class="section wrap reveal" id="restu">
      <div class="frame ratio-11 photo reveal">
        <img src="assets/img/hand.png" alt="Doa dan Restu" loading="lazy" decoding="async">
      </div>

      <div class="spacious">
        <div class="panel card">
          <h2 class="h2 title">Doa yang dititipkan, akan kami jaga</h2>
          <p class="soft">
            Barangkali tak semua langkah terlihat, tapi setiap doa selalu menemukan jalannya.
            Jika berkenan, titipkan sepenggal restu—sebagai cahaya yang kami bawa pulang.
          </p>

          <div class="quote" style="margin-top:14px;">
            <div class="arabic">وَأَنْكِحُوا الْأَيَامَىٰ مِنْكُمْ وَالصَّالِحِينَ مِنْ عِبَادِكُمْ وَإِمَائِكُمْ</div>
            <div class="soft" style="margin-top:10px;">
              “Nikahkanlah orang-orang yang masih membujang di antara kamu…”
            </div>
            <div class="ref">QS. An-Nūr (24): 32</div>
          </div>

          <form class="form" id="rsvpForm" autocomplete="on" novalidate>
            <div class="field">
              <input class="input" id="nama" name="nama" type="text" placeholder="Nama" aria-label="Nama" required />
            </div>

            <div class="field">
              <select class="select" id="hadir" name="hadir" aria-label="Kehadiran" required>
                <option value="" selected disabled>Kehadiran</option>
                <option value="hadir">Hadir</option>
                <option value="tidak">Tidak Hadir</option>
              </select>
            </div>

            <div class="field">
              <select class="select" id="tamu" name="tamu" aria-label="Jumlah tamu">
                <option value="1" selected>1 Tamu</option>
                <option value="2">2 Tamu</option>
                <option value="3">3 Tamu</option>
                <option value="4">4 Tamu</option>
                <option value="5">5 Tamu</option>
              </select>
            </div>

            <div class="field">
              <textarea class="textarea" id="ucapan" name="ucapan" placeholder="Ucapan & Doa" aria-label="Ucapan dan doa" required></textarea>
            </div>

            <div class="actions">
              <button class="btn primary" type="submit">Kirim</button>
              <button class="btn" id="resetBtn" type="button">Reset</button>
            </div>
          </form>

          <div class="list" id="guestList" aria-label="Buku tamu"></div>
        </div>
      </div>
    </section>

    <div class="sep" aria-hidden="true">
      <svg viewBox="0 0 420 64">
        <path d="M40 32c26-18 52-18 78 0 26 18 52 18 78 0 26-18 52-18 78 0 26 18 52 18 78 0"/>
        <path d="M210 18c10 8 10 20 0 28-10-8-10-20 0-28z"/>
      </svg>
    </div>

    <footer class="section wrap reveal" id="akhir" style="padding-bottom: 120px;">
      <div class="panel card">
        <h2 class="h2 title">Terima kasih</h2>
        <p class="soft">
          Kehadiran, doa, dan restu Anda adalah hadiah yang paling lembut.
          Semoga Allah SWT melimpahkan keberkahan untuk kita semua.
        </p>

        <div class="actions" style="margin-top:14px;">
          <button class="btn primary" id="toTop" type="button">Kembali ke Atas</button>
        </div>

        <div class="tiny" style="margin-top:12px;">
          Reza Budi Prasetyo &amp; Alya Putri Maharani
        </div>
      </div>
    </footer>

    <div class="dock" aria-hidden="false">
      <div class="dock-inner" role="navigation" aria-label="Navigasi">
        <button class="navbtn" data-target="#top" type="button">Mulai</button>
        <button class="navbtn" data-target="#janji" type="button">Janji</button>
        <button class="navbtn" data-target="#hari" type="button">Hari</button>
        <button class="navbtn" data-target="#tempat" type="button">Tempat</button>
        <button class="navbtn" data-target="#restu" type="button">Restu</button>
      </div>
    </div>

  </div>

  <script>
    (function(){
      const photos = {
        hero: "assets/img/reza-alya.png",
        opening: "assets/img/reza-alya.2.png",
        couple: "assets/img/reza-alya.3.png",
        akad: "assets/img/reza-alya.4.png",
        resepsi: "assets/img/reza-alya.5.png",
        venue: "assets/img/reza-alya.6.png",
        groom: "assets/img/reza.png",
        bride: "assets/img/alya.png",
        rsvp: "assets/img/hand.png"
      };

      const audioSrc = "assets/audio/Wedding%20Invitation%20Jason%20Farnham%20(No%20Copyright%20Music).mp3";

      const GUEST = "Dimas Budi Ramadhan";
      const LS_KEY = "reza_alya_guestbook_v1";

      const gate = document.getElementById("gate");
      const openBtn = document.getElementById("openBtn");
      const guestNameEl = document.getElementById("guestName");
      const guestLineEl = document.getElementById("guestLine");

      const audio = document.getElementById("bgm");
      const playFab = document.getElementById("playFab");
      const muteFab = document.getElementById("muteFab");
      const playIcon = document.getElementById("playIcon");
      const toast = document.getElementById("toast");

      const copyAddr = document.getElementById("copyAddr");
      const icsAkad = document.getElementById("icsAkad");
      const icsResepsi = document.getElementById("icsResepsi");

      const toTop = document.getElementById("toTop");
      const navBtns = Array.from(document.querySelectorAll(".navbtn"));

      const dEl = document.getElementById("d");
      const hEl = document.getElementById("h");
      const mEl = document.getElementById("m");
      const sEl = document.getElementById("s");

      const form = document.getElementById("rsvpForm");
      const list = document.getElementById("guestList");
      const resetBtn = document.getElementById("resetBtn");

      // Set recipient
      guestNameEl.textContent = GUEST;
      guestLineEl.textContent = "Untuk: " + GUEST;

      // Audio setup
      audio.src = audioSrc;
      audio.loop = true;
      audio.preload = "auto";
      audio.volume = 0.85;
      audio.muted = false;

      let toastTimer = null;
      function showToast(msg){
        toast.textContent = msg;
        toast.classList.add("show");
        clearTimeout(toastTimer);
        toastTimer = setTimeout(()=> toast.classList.remove("show"), 2600);
      }

      function setPlayIcon(isPlaying){
        playIcon.innerHTML = isPlaying
          ? '<path d="M7 6h3v12H7V6zm7 0h3v12h-3V6z" fill="rgba(243,240,234,.92)"/>'
          : '<path d="M8 5l10 7-10 7V5z" fill="rgba(243,240,234,.92)"/>';
      }

      function setMuteIcon(isMuted){
        muteFab.classList.toggle("muted", isMuted);
        const el = document.getElementById("muteIcon");
        if(!el) return;
        el.innerHTML = isMuted
          ? '<path d="M11 5L7 9H4v6h3l4 4V5z" fill="rgba(243,240,234,.92)"/><path d="M16 9l4 6" stroke="rgba(243,240,234,.92)" stroke-width="2" stroke-linecap="round"/><path d="M20 9l-4 6" stroke="rgba(243,240,234,.92)" stroke-width="2" stroke-linecap="round"/>'
          : '<path d="M11 5L7 9H4v6h3l4 4V5z" fill="rgba(243,240,234,.92)"/><path d="M16 8c1.8 1.6 1.8 6.4 0 8" stroke="rgba(243,240,234,.92)" stroke-width="2" stroke-linecap="round"/><path d="M18 6c3 2.8 3 9.2 0 12" stroke="rgba(243,240,234,.62)" stroke-width="2" stroke-linecap="round"/>';
      }

      async function tryPlay(){
        try{
          await audio.play();
          setPlayIcon(true);
          return true;
        }catch(e){
          setPlayIcon(false);
          showToast("Jika musik tidak terdengar, coba tap tombol play.");
          return false;
        }
      }

      function pause(){
        audio.pause();
        setPlayIcon(false);
      }

      // Gate open
      openBtn.addEventListener("click", async ()=>{
        gate.classList.add("is-hidden");
        document.documentElement.style.scrollBehavior = "smooth";
        // User interaction happened => safe to attempt play
        await tryPlay();
      }, { passive:true });

      // Play/pause control
      playFab.addEventListener("click", async ()=>{
        if(audio.paused){
          await tryPlay();
        }else{
          pause();
        }
      });

      // Mute
      muteFab.addEventListener("click", ()=>{
        audio.muted = !audio.muted;
        setMuteIcon(audio.muted);
        showToast(audio.muted ? "Suara dimatikan" : "Suara dinyalakan");
      });

      setPlayIcon(false);
      setMuteIcon(false);

      // Preload critical images
      const preload = [photos.hero, photos.opening, photos.couple, photos.akad, photos.resepsi, photos.venue, photos.rsvp];
      preload.forEach(src=>{
        const img = new Image();
        img.decoding = "async";
        img.src = src;
      });

      // Intersection reveal + separators
      const prefersReduce = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

      const io = new IntersectionObserver((entries)=>{
        entries.forEach(ent=>{
          if(ent.isIntersecting){
            ent.target.classList.add("is-visible");
          }
        });
      }, { threshold: 0.18 });

      document.querySelectorAll(".reveal, .sep").forEach(el=>{
        if(prefersReduce) el.classList.add("is-visible");
        else io.observe(el);
      });

      // Nav active based on sections
      const sectionTargets = [
        { id:"#top", el: document.getElementById("top") },
        { id:"#janji", el: document.getElementById("janji") },
        { id:"#hari", el: document.getElementById("hari") },
        { id:"#tempat", el: document.getElementById("tempat") },
        { id:"#restu", el: document.getElementById("restu") }
      ].filter(x=>x.el);

      const navIO = new IntersectionObserver((entries)=>{
        let best = null;
        for(const ent of entries){
          if(ent.isIntersecting){
            best = ent.target;
            break;
          }
        }
        if(!best) return;
        const hash = "#" + best.id;
        navBtns.forEach(b=> b.classList.toggle("active", b.dataset.target === hash));
      }, { rootMargin: "-45% 0px -45% 0px", threshold: 0.01 });

      sectionTargets.forEach(s=> navIO.observe(s.el));

      navBtns.forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const target = document.querySelector(btn.dataset.target);
          if(target) target.scrollIntoView({ behavior: prefersReduce ? "auto" : "smooth", block: "start" });
        });
      });

      toTop.addEventListener("click", ()=>{
        document.getElementById("top").scrollIntoView({ behavior: prefersReduce ? "auto" : "smooth" });
      });

      // Countdown
      const targetAkad = new Date("2026-01-17T08:00:00+07:00").getTime();

      function pad2(n){ return String(n).padStart(2,"0"); }
      function tick(){
        const now = Date.now();
        let diff = targetAkad - now;
        if(diff < 0) diff = 0;
        const sec = Math.floor(diff/1000);
        const days = Math.floor(sec / 86400);
        const hours = Math.floor((sec % 86400) / 3600);
        const mins = Math.floor((sec % 3600) / 60);
        const secs = sec % 60;

        dEl.textContent = days;
        hEl.textContent = pad2(hours);
        mEl.textContent = pad2(mins);
        sEl.textContent = pad2(secs);
      }
      tick();
      setInterval(tick, 1000);

      // Copy address
      const addrText = "Le Dian Hotel Serang";
      copyAddr.addEventListener("click", async ()=>{
        try{
          await navigator.clipboard.writeText(addrText);
          showToast("Alamat tersalin.");
        }catch(e){
          // fallback
          const ta = document.createElement("textarea");
          ta.value = addrText;
          ta.style.position = "fixed";
          ta.style.left = "-9999px";
          document.body.appendChild(ta);
          ta.select();
          try{
            document.execCommand("copy");
            showToast("Alamat tersalin.");
          }catch(_){
            showToast("Gagal menyalin alamat.");
          }
          document.body.removeChild(ta);
        }
      });

      // ICS helpers (use UTC Z for compatibility)
      function toICSDateUTC(date){
        const yyyy = date.getUTCFullYear();
        const mm = String(date.getUTCMonth()+1).padStart(2,"0");
        const dd = String(date.getUTCDate()).padStart(2,"0");
        const hh = String(date.getUTCHours()).padStart(2,"0");
        const mi = String(date.getUTCMinutes()).padStart(2,"0");
        const ss = String(date.getUTCSeconds()).padStart(2,"0");
        return `${yyyy}${mm}${dd}T${hh}${mi}${ss}Z`;
      }

      function downloadICS({ title, start, end, location, filename }){
        const now = new Date();
        const uid = `reza-alya-${now.getTime()}@invitation`;
        const dtstamp = toICSDateUTC(now);

        const ics =
`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//RezaAlya//Invitation//ID
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
UID:${uid}
DTSTAMP:${dtstamp}
DTSTART:${toICSDateUTC(start)}
DTEND:${toICSDateUTC(end)}
SUMMARY:${title}
LOCATION:${location}
DESCRIPTION:${title} - ${location}
END:VEVENT
END:VCALENDAR`;

        const blob = new Blob([ics], { type: "text/calendar;charset=utf-8" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        setTimeout(()=>{
          URL.revokeObjectURL(url);
          document.body.removeChild(a);
        }, 0);
      }

      icsAkad.addEventListener("click", ()=>{
        // 08:00-09:00 WIB => 01:00-02:00 UTC
        const start = new Date("2026-01-17T08:00:00+07:00");
        const end   = new Date("2026-01-17T09:00:00+07:00");
        downloadICS({
          title: "Akad Nikah Reza & Alya",
          start, end,
          location: "Le Dian Hotel Serang",
          filename: "Akad-Reza-Alya.ics"
        });
        showToast("File kalender untuk Akad dibuat.");
      });

      icsResepsi.addEventListener("click", ()=>{
        const start = new Date("2026-01-17T10:00:00+07:00");
        const end   = new Date("2026-01-17T15:00:00+07:00");
        downloadICS({
          title: "Resepsi Reza & Alya",
          start, end,
          location: "Le Dian Hotel Serang",
          filename: "Resepsi-Reza-Alya.ics"
        });
        showToast("File kalender untuk Resepsi dibuat.");
      });

      // Guestbook seed
      const seedTexts = [
        { name: "Dimas Budi Ramadhan", hadir: true, tamu: 1, ucapan: "Selamat menempuh hidup baru Reza & Alya. Semoga jadi keluarga sakinah, mawaddah, warahmah. Lancar sampai hari H." },
        { name: "Raka Pratama", hadir: true, tamu: 2, ucapan: "MasyaAllah, ikut bahagia. Semoga rumah tangganya adem, rezekinya luas, dan selalu saling menguatkan." },
        { name: "Nadia Putri", hadir: true, tamu: 1, ucapan: "Congratulations! Semoga pernikahannya penuh berkah, sehat, dan selalu kompak sampai tua." },
        { name: "Fajar Maulana", hadir: true, tamu: 3, ucapan: "Selamat yaa. Semoga acaranya lancar, tamunya ramai, dan semuanya dimudahkan." },
        { name: "Intan Salsabila", hadir: false, tamu: 1, ucapan: "Maaf belum bisa hadir. Doa terbaik buat kalian berdua, semoga bahagia dan diberkahi selalu." },
        { name: "Yoga Saputra", hadir: true, tamu: 2, ucapan: "Selamat Reza & Alya. Semoga jadi pasangan yang saling melengkapi, saling sabar, dan makin sayang tiap hari." },
        { name: "Rizky Andrian", hadir: true, tamu: 1, ucapan: "Happy wedding! Semoga semua rencana baik kalian dimudahkan, dan rumah tangga selalu hangat." },
        { name: "Siti Rahmah", hadir: true, tamu: 2, ucapan: "Barakallahu lakuma. Semoga menjadi keluarga yang penuh cinta, rahmat, dan ketenangan." },
        { name: "Ahmad Fikri", hadir: false, tamu: 1, ucapan: "Mohon maaf belum bisa datang. Semoga akad dan resepsi berjalan lancar, dan kalian selalu diberi kebahagiaan." },
        { name: "Dewi Lestari", hadir: true, tamu: 1, ucapan: "Seneng banget dengernya. Semoga langgeng, komunikasinya sehat, dan selalu saling menghargai." },
        { name: "Rina Wulandari", hadir: true, tamu: 2, ucapan: "Selamat ya! Semoga jadi tim terbaik seumur hidup, kompak terus, dan diberkahi dalam setiap langkah." },
        { name: "Bayu Kurniawan", hadir: true, tamu: 1, ucapan: "Selamat menempuh babak baru. Semoga bahagia, sehat, dan karier serta rezekinya makin lancar." },
        { name: "Rafi Nurhadi", hadir: true, tamu: 4, ucapan: "InsyaAllah hadir. Semoga acara di Le Dian lancar, cuaca bagus, dan semuanya berjalan sesuai harapan." },
        { name: "Putri Anjani", hadir: false, tamu: 1, ucapan: "Selamat untuk kalian berdua. Titip doa dari jauh semoga rumah tangga kalian selalu diberi berkah." },
        { name: "Agung Prasetyo", hadir: true, tamu: 2, ucapan: "Selamat Reza & Alya. Semoga jadi pasangan yang saling menenangkan, saling dukung, dan langgeng." },
        { name: "Maya Kartika", hadir: true, tamu: 1, ucapan: "Bahagia selalu ya. Semoga hari pernikahannya berkesan, dan setelahnya makin harmonis." },
        { name: "Hendra Gunawan", hadir: true, tamu: 2, ucapan: "Selamat! Semoga pernikahan ini membawa kebaikan, keberkahan, dan kebahagiaan untuk kalian." },
        { name: "Aulia Nurfadillah", hadir: true, tamu: 1, ucapan: "MasyaAllah tabarakallah. Semoga jadi keluarga yang penuh cinta dan selalu dalam lindungan Allah." },
        { name: "Kevin Pradana", hadir: true, tamu: 1, ucapan: "Congrats! Semoga makin solid, makin sayang, dan semua urusan dimudahkan." },
        { name: "Tania Aprillia", hadir: true, tamu: 2, ucapan: "Selamat menempuh hidup baru. Semoga kalian selalu diberikan kesabaran, kelapangan hati, dan kebahagiaan." }
      ];

      // offsets in minutes (varied from minutes to days)
      const offsets = [8, 22, 41, 95, 140, 220, 360, 520, 760, 980, 1210, 1800, 2400, 3200, 4200, 5600, 7200, 9000, 10800, 14400];

      function loadGuestbook(){
        try{
          const raw = localStorage.getItem(LS_KEY);
          if(!raw) return null;
          const parsed = JSON.parse(raw);
          if(!Array.isArray(parsed)) return null;
          return parsed;
        }catch(_){
          return null;
        }
      }

      function saveGuestbook(items){
        localStorage.setItem(LS_KEY, JSON.stringify(items));
      }

      function seedGuestbook(){
        const now = Date.now();
        const seeded = seedTexts.map((x, i)=>{
          const offMin = offsets[i] ?? (30*(i+1));
          const createdAt = new Date(now - offMin*60*1000).toISOString();
          return { ...x, createdAt };
        }).sort((a,b)=> new Date(b.createdAt) - new Date(a.createdAt));
        saveGuestbook(seeded);
        return seeded;
      }

      function relTime(iso){
        const t = new Date(iso).getTime();
        const diff = Date.now() - t;
        if(!isFinite(diff) || diff < 0) return "";
        const min = Math.floor(diff / 60000);
        if(min < 1) return "baru saja";
        if(min < 60) return `${min} menit lalu`;
        const hr = Math.floor(min / 60);
        if(hr < 24) return `${hr} jam lalu`;
        const day = Math.floor(hr / 24);
        if(day <= 7) return `${day} hari lalu`;
        const d = new Date(iso);
        return d.toLocaleDateString("id-ID", { day:"2-digit", month:"short", year:"numeric" });
      }

      function esc(s){
        return String(s)
          .replaceAll("&","&amp;")
          .replaceAll("<","&lt;")
          .replaceAll(">","&gt;")
          .replaceAll('"',"&quot;")
          .replaceAll("'","&#039;");
      }

      function render(items){
        list.innerHTML = "";
        const frag = document.createDocumentFragment();

        items.forEach(it=>{
          const div = document.createElement("div");
          div.className = "item";

          const top = document.createElement("div");
          top.className = "item-top";

          const name = document.createElement("div");
          name.className = "name";
          name.textContent = it.name;

          const time = document.createElement("div");
          time.className = "time";
          time.textContent = relTime(it.createdAt);

          top.appendChild(name);
          top.appendChild(time);

          const msg = document.createElement("div");
          msg.className = "msg";
          msg.textContent = it.ucapan;

          const badge = document.createElement("div");
          badge.className = "badge";
          const bdot = document.createElement("span");
          bdot.className = "bico" + (it.hadir ? "" : " off");
          const btxt = document.createElement("span");
          btxt.textContent = it.hadir ? `Hadir · ${it.tamu} tamu` : "Tidak hadir";
          badge.appendChild(bdot);
          badge.appendChild(btxt);

          div.appendChild(top);
          div.appendChild(msg);
          div.appendChild(badge);

          frag.appendChild(div);
        });

        list.appendChild(frag);
      }

      let guestbook = loadGuestbook();
      if(!guestbook) guestbook = seedGuestbook();
      render(guestbook);

      form.addEventListener("submit", (e)=>{
        e.preventDefault();
        const nama = (document.getElementById("nama").value || "").trim();
        const hadir = document.getElementById("hadir").value;
        const tamu = parseInt(document.getElementById("tamu").value || "1", 10);
        const ucapan = (document.getElementById("ucapan").value || "").trim();

        if(!nama){
          showToast("Nama masih kosong.");
          return;
        }
        if(!hadir){
          showToast("Mohon pilih kehadiran.");
          return;
        }
        if(!ucapan){
          showToast("Ucapan masih kosong.");
          return;
        }

        const entry = {
          name: nama,
          hadir: hadir === "hadir",
          tamu: Math.min(5, Math.max(1, isFinite(tamu) ? tamu : 1)),
          ucapan: ucapan,
          createdAt: new Date().toISOString()
        };

        guestbook.unshift(entry);
        saveGuestbook(guestbook);
        render(guestbook);

        form.reset();
        showToast("Terima kasih. Doa Anda tersimpan.");
      });

      resetBtn.addEventListener("click", ()=>{
        const ok = confirm("Reset semua data RSVP dan buku tamu di perangkat ini?");
        if(!ok) return;
        localStorage.removeItem(LS_KEY);
        guestbook = seedGuestbook();
        render(guestbook);
        showToast("Data telah direset.");
      });

      // Ensure images never crop: object-fit contain already. Add fallback on error
      document.querySelectorAll("img").forEach(img=>{
        img.addEventListener("error", ()=>{
          // hide broken image but keep frame clean (no text)
          img.style.opacity = "0";
        });
      });

      // Improve smoothness: lock scroll-behavior default after load
      window.addEventListener("load", ()=>{
        // nothing noisy
      });

      // If gate remains open but user scrolls, keep it blocked (already fixed)
    })();
  </script>
</body>
</html>
